require(["jquery"],function(i){function e(){return is_correct=!1,t.code=i("#ex_code").val(),t.password=i("#ex_password").val(),5==t.code.length&&5==t.password.length&&"NaN"!=Number(t.code).toString()&&"NaN"!=Number(t.password).toString()?is_correct=!0:i("#ex_code").focus(),is_correct}var n,t={},o={bind:function(){i("#container").on("click","#showActionSheet",function(){function e(i,e){i.removeClass("weui_actionsheet_toggle"),e.removeClass("weui_fade_toggle"),e.on("transitionend",function(){e.hide()}).on("webkitTransitionEnd",function(){e.hide()})}n||(n=i(this).data("id"));var t=i("#mask"),o=i("#weui_actionsheet");o.addClass("weui_actionsheet_toggle"),t.show().focus().addClass("weui_fade_toggle").one("click",function(){e(o,t)}),i("#actionsheet_cancel").one("click",function(){e(o,t)}),t.unbind("transitionend").unbind("webkitTransitionEnd")})}};o.bind();var s={show:function(e,n){var t=i("#tips_dialog");t.find(".weui_dialog_hd").text(e),t.find(".weui_dialog_bd").text(n),i("#tips_dialog").show()},bind:function(){i("#tips_dialog").on("click",".weui_btn_dialog",function(){i("#tips_dialog").hide()})}};s.bind(),i("#ex_code").on("keypress",function(){if(5==i(this).val().length)return!1}),i("#ex_password").on("keypress",function(){if(5==i(this).val().length)return!1}),i(".submit-btn").on("click",function(){var o=i(this);if(!e()||"disabled"==o.attr("disabled"))return!1;o.attr("disabled",!0),o.addClass("weui_btn_disabled");var a="/seller/"+n+"/exchange";i.post(a,t,function(e,n){o.attr("disabled",!1),o.removeClass("weui_btn_disabled"),i("#actionsheet_cancel").click(),"success"==n?(s.show("兑换结果",e),console.log(e)):s.show("网络错误","请稍后重试!")})})});