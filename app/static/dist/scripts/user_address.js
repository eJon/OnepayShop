require(["jquery","modal-box","jquery-cityselect"],function(t){function d(d){if(d&&t(".address").find("tbody").find(".addr-row").length>=5)return!1;var i=t("form"),a=!1;i.find("#province").val(i.find(".prov").val()),i.find("#city_input").val(i.find(".city").val()),i.find("#dist").val(i.find(".dist").val());var e=i.find("#name").val(),n=i.find("#detail").val(),l=i.find("#tel").val(),r=i.find("#province").val(),s=i.find("#city_input").val();i.find("#dist").val();return t.trim(e).length>0&&t.trim(n).length>0&&t.trim(l).length>0?t.trim(r).length>0&&t.trim(s).length>0?a=!0:0==t.trim(r).length?i.find(".prov").focus():0==t.trim(s).length&&i.find(".city").focus():0==t.trim(e).length?i.find("#name").focus():0==t.trim(n).length?i.find("#detail").focus():0==t.trim(l).length&&i.find("#tel").focus(),a}t(".add-addr").on("click",function(){t("#addr_modal").modal("show")}),t("#city").citySelect({url:"/static/dist/scripts/city.min.js",required:!1,nodata:"none"});var i=t(".info-list").data("id"),a="/api/v1.0/address";t("#submitbtn").on("click",function(){var i=t(this),a=!0;return i.closest("form").attr("action").indexOf("?edit=true")!=-1&&(a=!1),!!d(a)&&void t("#addr_modal").modal("hide")}),t(".options-addr").find("a").on("click",function(){var d,e=t(this),n={},l=e.closest("tr").data("id");if(e.hasClass("delete-addr")||e.hasClass("default-addr"))e.hasClass("delete-addr")?d="DELETE":e.hasClass("default-addr")&&(d="PUT"),"NaN"!=Number(l).toString()&&Number(l)>0&&"NaN"!=Number(i).toString()&&Number(i)>0&&(n.addr_id=l,n.uid=i,t.ajax({url:a,type:d,data:n,success:function(t,i){"success"==i&&"ok"==t.message&&("DELETE"==d?e.closest("tr").fadeOut():(e.closest("tbody").find(".default-flag").text(""),e.fadeOut(),e.closest("tr").find(".default-flag").text("æ˜¯")))}}));else{console.log("kkkkkk");var r=t("form"),s=e.closest("tr");r.attr("action",a+"?edit=true&addr_id="+l),r.find("#name").val(s.data("name")),r.find("#detail").val(s.data("detail")),r.find("#tel").val(s.data("tel")),r.find("#province").val(s.data("prov")),r.find("#city_input").val(s.data("city")),r.find("#dist").val(s.data("dist")),t("#city").citySelect({url:"/static/dist/scripts/city.min.js",prov:s.data("prov"),city:s.data("city"),dist:s.data("dist"),required:!1,nodata:"none"}),t("#addr_modal").modal("show")}})});